{% extends "host/host_dashboard.html" %}

{% block right_div %}
<h1 style="color: black; text-align: center;">Submissions for {{ event.hackathon_name }}</h1>

{% if submissions %}
    <div class="cards-container" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
        {% for submission in submissions %}
            <div class="card">
                <div class="hackathon_name">
                    <strong>Team:</strong> {{ submission.team.name }}
                </div>
                <div style="padding: 16px; text-align: center;">
                    <p><strong>Live Link:</strong> 
                        {% if submission.live_link %}
                            <a href="{{ submission.live_link }}" target="_blank">{{ submission.live_link }}</a>
                        {% else %}
                            No live link provided.
                        {% endif %}
                    </p>

                    <div style="text-align: center; margin-top: 16px;">
                        <a href="#" class="btn-like" data-submission-id="{{ submission.id }}" onclick="showFiles({{ submission.id }})">View Files</a>
                    </div>

                    <!-- Hidden Files Section -->
                    <div id="files-container-{{ submission.id }}" style="display:block; margin-top: 16px;">
                        {% for file in submission.files.all %}
                            <p><a href="{{ file.file.url }}" download>{{ file.file.name }}</a></p>
                        {% endfor %}
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p style="text-align: center;">No submissions yet.</p>
{% endif %}
{% endblock %}

<script>
    function showFiles(submissionId) {
        const filesContainer = document.getElementById('files-container-' + submissionId);
        if (filesContainer.style.display === 'none') {
            filesContainer.style.display = 'block';
        } else {
            filesContainer.style.display = 'none';
        }
    }
</script>
